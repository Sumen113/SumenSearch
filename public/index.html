<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/FerryAr/fa-pro/css/all.css" />
        <script src="/uv/uv.bundle.js"></script>
        <script src="/uv/uv.config.js"></script>

        <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("/uv/sw.js", {
                    scope: __uv$config.prefix,
                });
            });
        }
        </script>

        <link rel="stylesheet" href="example.css">
    </head>
    <body>
        <div class="input-wrapper">
            <div class="url-bar">
                <input id="urlInput" type="text" placeholder="Unblock any Website">
                <i class="fas fa-search search-icon"></i>
            </div>
            <i class="fas fa-chevron-down toggle-icon" style="display: none;"></i> <!-- Moved here -->
        </div>
        <iframe id="iframeWindow" class="iframeWindow"></iframe>
    </body>
    <script src="example.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function() {
            const input = document.querySelector('input');
            const inputWrapper = document.querySelector('.input-wrapper');
        
            if (input) {
                input.addEventListener('focus', () => {
                    window.parent.postMessage({ event: 'iframeFocus' }, '*');
                });
                
                // Instead of using just blur, listen globally for clicks
                document.addEventListener('click', (e) => {
                    const clickedInside = inputWrapper.contains(e.target);
        
                    if (!clickedInside) {
                        // Only post iframeBlur if clicked OUTSIDE the input wrapper
                        window.parent.postMessage({ event: 'iframeBlur' }, '*');
                    }
                });
            }
        });
    </script>        
</html>
